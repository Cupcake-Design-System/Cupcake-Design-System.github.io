<aside class="c-sidenav">
  <nav class="c-sidenav-body">
    <ul class="c-sidenav-menu">
      {%- assign page_slug = page.url | split: '/' | last -%}
      {%- for group in site.data.elements -%}
      {%- assign link = group.pages | first -%}
      {%- assign link_slug = link.title | slugify -%}
      {%- assign group_slug = group.title | slugify -%}
      {%- assign active = nil -%}
      {%- if page.group == group_slug -%}
      {%- assign active = 'c-sidenav-menu-item-active' -%}
      {%- endif -%}

      <li class="c-sidenav-menu-item {% unless active == nil %} {{ active }}{% endunless %}">
        <a class="c-sidenav-menu-link">
          <span class="c-sidenav-menu-title">
            {{ group.title }}
          </span>
        </a>

          <ul class="c-sidenav-menu-submenu">
            {%- for doc in group.pages -%}
              {%- assign doc_slug = doc.title | slugify -%}
              {%- assign active = nil -%}
              {%- if page.group == group_slug and page_slug == doc_slug -%}
                {%- assign active = 'c-sidenav-menu-item-active' -%}
              {%- endif -%}
              <li {% unless active == nil %} class="c-sidenav-menu-item {{ active }}"{% endunless %}>
                <a class="c-sidenav-menu-link" href="{% if group.title == "Resources" %}{{ site.url }}{{ site.baseurl }}/{{ doc_slug }}/{% else %}{{ site.url }}{{ site.baseurl }}/{{ group_slug }}/{{ doc_slug }}/{% endif %}">
                  {{ doc.title }} 
                </a>
    
                {%- comment -%}
                {% unless doc.sections == nil %}

                  <ul class="c-sidenav-menu-submenu">
                    {% for section in doc.sections %}
                      <li class="c-sidenav-menu-item">
                        <a class="c-sidenav-menu-link" href="#{{ section.title | downcase | replace: ' ', '-' }}">
                          {{ section.title }}
                        </a>
                      </li>
                    {% endfor %}
                  </ul>
                {% endunless %}
                {%- endcomment -%}
              </li>
            {%- endfor -%}
          </ul>
      </li>
      {%- endfor -%}
    </ul>
  </nav>
</aside>